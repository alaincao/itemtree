!function i(s,l,u){function a(e,t){if(!l[e]){if(!s[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var o=l[e]={exports:{}};s[e][0].call(o.exports,function(t){return a(s[e][1][t]||t)},o,o.exports,i,s,l,u)}return l[e].exports}for(var c="function"==typeof require&&require,t=0;t<u.length;t++)a(u[t]);return a}({1:[function(t,e,n){},{}],2:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r={common:t("./src/Views/common"),admin:{home:t("./src/Views/Admin/Home")},itemttt:{list:t("./src/Views/ItemTTT/List"),add:t("./src/Views/ItemTTT/Add"),edit:t("./src/Views/ItemTTT/Edit")},blog:{list:t("./src/Views/Blog/List"),edit:t("./src/Views/Blog/Edit")},testimonial:{list:t("./src/Views/Testimonial/List")}};window.ttt=r},{"./src/Views/Admin/Home":14,"./src/Views/Blog/Edit":16,"./src/Views/Blog/List":17,"./src/Views/ItemTTT/Add":18,"./src/Views/ItemTTT/Edit":19,"./src/Views/ItemTTT/List":21,"./src/Views/Testimonial/List":22,"./src/Views/common":23}],3:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t){this.id=ko.observable(null),this.date=ko.observable(""),this.imageHtml=ko.observable(""),this.titleHtmlEN=ko.observable(""),this.titleHtmlFR=ko.observable(""),this.titleHtmlNL=ko.observable(""),this.textHtmlEN=ko.observable(""),this.textHtmlFR=ko.observable(""),this.textHtmlNL=ko.observable(""),this.active=ko.observable(!1),null!=t&&this.fromDTO(t)}return t.prototype.fromDTO=function(t){var e=this;e.id(t.id),e.date(t.date),e.imageHtml(t.imageHtml),e.titleHtmlEN(t.titleHtmlEN),e.titleHtmlFR(t.titleHtmlFR),e.titleHtmlNL(t.titleHtmlNL),e.textHtmlEN(t.textHtmlEN),e.textHtmlFR(t.textHtmlFR),e.textHtmlNL(t.textHtmlNL),e.active(t.active)},t.prototype.toDTO=function(){var t=this,e={};return e.id=t.id(),e.date=t.date(),e.imageHtml=t.imageHtml(),e.titleHtmlEN=t.titleHtmlEN(),e.titleHtmlFR=t.titleHtmlFR(),e.titleHtmlNL=t.titleHtmlNL(),e.textHtmlEN=t.textHtmlEN(),e.textHtmlFR=t.textHtmlFR(),e.textHtmlNL=t.textHtmlNL(),e.active=t.active(),e},t}();n.BlogPostKO=r},{}],4:[function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Views/common"),i=function(i){function t(t,e,n){var r;null==e&&(e={code:null,active:!1,features:[],pictures:[]});var o=r=i.call(this,t,e,n)||this;return null!=o.price&&s.utils.ensureInteger({observable:o.price,canBeZero:!1,canBeNull:!0,mustBePositive:!0}),r}return o(t,i),t.prototype.toDictObj=function(t){return i.prototype.toDictObj.call(this,t)},t}(t("../Utils/BaseAutoItem").BaseAutoItem);n.ItemKO=i},{"../Utils/BaseAutoItem":13,"../Views/common":23}],5:[function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Views/common"),s=function(t){null==t&&(t={en:"",fr:"",nl:""}),this.en=ko.observable(t.en),this.fr=ko.observable(t.fr),this.nl=ko.observable(t.nl)},l=function(r){function t(t){var e=this;null==t&&(t={en:"",fr:"",nl:"",inOriginal:!1,inTranslation:!1});var n=e=r.call(this,t)||this;return e.inOriginal=ko.observable(t.inOriginal),e.inTranslation=ko.observable(t.inTranslation),e.enOriginal=ko.observable(n.en()),e.frOriginal=ko.observable(n.fr()),e.nlOriginal=ko.observable(n.nl()),e.modified=ko.computed(function(){return n.en()!=n.enOriginal()||(n.fr()!=n.frOriginal()||n.nl()!=n.nlOriginal())}),e}return o(t,r),t.prototype.toDTO=function(){return{en:this.en(),fr:this.fr(),nl:this.nl()}},t.prototype.setAllLanguagesTo=function(t){this.en(t),this.fr(t),this.nl(t)},t.prototype.copyEnToBlanks=function(){var t=this,e=t.en();i.utils.stringIsNullOrWhitespace(t.fr())&&t.fr(e),i.utils.stringIsNullOrWhitespace(t.nl())&&t.nl(e)},t}(n.TranslationKO=s);n.TranslationItemKO=l},{"../Views/common":23}],6:[function(t,e,n){var r;Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Views/common");n.Languages=(r=o.utils.strEnum(["en","fr","nl"])).e,n.allLanguages=r.a},{"./Views/common":23}],7:[function(t,e,n){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Views/common");n.list=function(n){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestForm(s.routes.api.blog.list,n)];case 1:return(e=t.sent()).posts=e.result,delete e.result,[2,e]}})})},n.uploadPicture=function(o){return r(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:return e=s.routes.api.blog.pictureUpload,(n=new FormData).append("file",o),[4,s.url.postRequestFormData(e,n)];case 1:return(r=t.sent()).imageTagContent=r.result,delete r.result,[2,r]}})})},n.save=function(n){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestJSON(s.routes.api.blog.save,n)];case 1:return(e=t.sent()).id=e.result,delete e.result,[2,e]}})})},n.delete_=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestForm(s.routes.api.blog.delete,{id:e})];case 1:return[2,t.sent()]}})})}},{"../Views/common":23}],8:[function(t,e,n){var o=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Views/common");n.getUrlCode=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return s.utils.stringIsNullOrWhitespace(e)?[2,null]:[4,s.url.getRequest(s.routes.api.getUrlCode,{originalCode:e})];case 1:return[2,t.sent()]}})})},n.details=function(r){return o(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:return e=s.routes.api.items.details.replace(s.routes.itemCodeParameter,r),[4,s.url.postRequestJSON(e,{})];case 1:return(n=t.sent()).item=n.result,delete n.result,[2,n]}})})},n.save=function(n){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestJSON(s.routes.api.items.save,n)];case 1:return(e=t.sent()).newCode=e.result,delete e.result,[2,e]}})})},n.delete_=function(n){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return e=s.routes.api.items.delete.replace(s.routes.itemCodeParameter,n),[4,s.url.postRequestJSON(e,{})];case 1:return[2,t.sent()]}})})}},{"../Views/common":23}],9:[function(t,e,n){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},s=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../Views/common");n.upload=function(o,i){return r(this,void 0,void 0,function(){var e,n,r;return s(this,function(t){switch(t.label){case 0:return e=l.routes.api.items.pictures.upload.replace(l.routes.itemCodeParameter,o),(n=new FormData).append("file",i),[4,l.url.postRequestFormData(e,n)];case 1:return(r=t.sent()).imageNumber=r.result,delete r.result,[2,r]}})})},n.delete_=function(n){return r(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return e=l.routes.api.items.pictures.delete.replace(l.routes.itemCodeParameter,n.itemCode),[4,l.url.postRequestForm(e,{number:n.number})];case 1:return[2,t.sent()]}})})},n.reorder=function(n){return r(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return e=l.routes.api.items.pictures.reorder.replace(l.routes.itemCodeParameter,n.itemCode),[4,l.url.postRequestForm(e,{number:n.number,newNumber:n.newNumber})];case 1:return[2,t.sent()]}})})},n.setMain=function(n){return r(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return e=l.routes.api.items.pictures.setMain.replace(l.routes.itemCodeParameter,n.itemCode),[4,l.url.postRequestForm(e,{number:n.number,isMain:n.isMain})];case 1:return[2,t.sent()]}})})}},{"../Views/common":23}],10:[function(t,e,n){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},o=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Views/common");n.changePassword=function(n){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e=i.routes.api.changePassword,[4,i.url.postRequestForm(e,n)];case 1:return[2,t.sent()]}})})}},{"../Views/common":23}],11:[function(t,e,n){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Views/common");n.save=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestJSON(s.routes.api.testimonial.save,e)];case 1:return[2,t.sent()]}})})},n.uploadPicture=function(o){return r(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:return e=s.routes.api.testimonial.pictureUpload,(n=new FormData).append("file",o),[4,s.url.postRequestFormData(e,n)];case 1:return(r=t.sent()).imageData=r.result,delete r.result,[2,r]}})})}},{"../Views/common":23}],12:[function(t,e,n){var r,o=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Views/common");n.TranslationTypes=(r=s.utils.strEnum(["feature"])).e,n.allTranslationTypes=r.a,n.list=function(n){return o(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestForm(s.routes.api.translations.list,n)];case 1:return(e=t.sent()).translations=e.result,delete e.result,[2,e]}})})},n.save=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s.url.postRequestJSON(s.routes.api.translations.save,e)];case 1:return[2,t.sent()]}})})},n.autoCompleteResolve=function(r){return o(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:return e=s.routes.api.autoComplete,[4,s.url.postRequestForm(e,r)];case 1:return(n=t.sent()).list=n.result,delete n.result,[2,n]}})})}},{"../Views/common":23}],13:[function(t,e,n){Object.defineProperty(n,"__esModule",{value:!0});var o="ttt-name",r=function(){function t(t,e,n){this.fieldNames=null!=n?n:[],this.knockoutify(t,e)}return t.prototype.toDictObj=function(r){var o=this;return null==r&&(r={}),$.each(this.fieldNames,function(t,e){var n=o[e];r[e]=n()}),r},t.prototype.fromDictObj=function(n){var r=this;$.each(this.fieldNames,function(t,e){(0,r[e])(n[e])})},t.prototype.knockoutify=function(t,e){var r=this,n=this;t.find("["+o+"]").each(function(t,e){var n=$(e).attr(o);0<=r.fieldNames.indexOf(n)||r.fieldNames.push(n)}),r.fieldNames.forEach(function(t){n[t]=ko.observable(e[t])})},t}();n.BaseAutoItem=r},{}],14:[function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},s=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../common"),u=t("../../Services/LoginController"),a=t("../../Services/TranslationController"),c=t("../../DTOs/Translation");n.init=function(e){return i(this,void 0,void 0,function(){return s(this,function(t){return n.changePassword=new f(e.$passwordBlockingDiv),n.features=new p(e.$featuresBlockingDiv),[2]})})};var f=function(){function t(t){this.$blockingDiv=t,this.original=ko.observable(""),this.newPassword=ko.observable(""),this.newPasswordAgain=ko.observable("")}return t.prototype.change=function(){return i(this,void 0,void 0,function(){var e,n,r,o,i;return s(this,function(t){switch(t.label){case 0:return n=(e=this).original(),r=e.newPassword(),o=e.newPasswordAgain(),l.utils.stringIsNullOrWhitespace(r)?[2]:l.utils.stringIsNullOrWhitespace(n)?[2]:r!=o?(l.html.showMessage("Les 2 mots de passe ne concordent pas"),[2]):(l.html.block(e.$blockingDiv),[4,u.changePassword({oldPassword:n,newPassword:r})]);case 1:return i=t.sent(),l.html.unblock(e.$blockingDiv),i.success?(l.html.showMessage("Password changed successfully"),[2]):(l.utils.error("change password error",{rc:i}),l.html.showMessage(i.errorMessage),[2])}})})},t}(),d=function(){function t(t,e){var n=this;this.$blockingDiv=e,this.type=t,this.items=ko.observableArray(),this.hasChanges=ko.computed(function(){for(var t=n.items(),e=0;e<t.length;++e)if(t[e].modified())return!0;return!1}),this.refresh()}return t.prototype.refresh=function(){return i(this,void 0,void 0,function(){var e,n,r;return s(this,function(t){switch(t.label){case 0:return e=this,l.html.block(e.$blockingDiv),[4,a.list({type:e.type})];case 1:return n=t.sent(),l.html.unblock(e.$blockingDiv),n.success?(r=n.translations.map(function(t){return new h(t)}),e.items(r),[2]):(l.utils.error("refresh translations error",{rc:n}),l.html.showMessage(n.errorMessage),[2])}})})},t.prototype.clearLine=function(t){this.items()[t()].setAllLanguagesTo("")},t.prototype.addLine=function(){this.items.push(new h)},t.prototype.save=function(){return i(this,void 0,void 0,function(){var e,n,r;return s(this,function(t){switch(t.label){case 0:return 0!=(n=(e=this).items().map(function(t){if(!t.modified())return null;var e=t.toDTO();return e.enOriginal=t.enOriginal(),e}).filter(function(t){return null!=t})).length?[3,2]:[4,e.refresh()];case 1:return t.sent(),[2];case 2:return l.html.block(e.$blockingDiv),[4,a.save({type:e.type,translations:n})];case 3:return r=t.sent(),l.html.unblock(e.$blockingDiv),r.success?[4,e.refresh()]:(l.utils.error("save translations error",{rc:r}),l.html.showMessage(r.errorMessage),[2]);case 4:return t.sent(),[2]}})})},t}(),h=function(r){function t(t){var e=r.call(this,t)||this,n=e;return e.showReset=ko.computed(function(){return n.inTranslation()}),e}return o(t,r),t}(c.TranslationItemKO),p=function(e){function t(t){return e.call(this,a.TranslationTypes.feature,t)||this}return o(t,e),t}(d)},{"../../DTOs/Translation":5,"../../Services/LoginController":10,"../../Services/TranslationController":12,"../common":23}],15:[function(t,e,n){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},o=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../common");(n.list||(n.list={})).list=function(n){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e=i.routes.blog.list.replace(i.routes.languageParameter,i.pageParameters.currentLanguage),[4,i.url.getRequest(e,n)];case 1:return[2,t.sent()]}})})}},{"../common":23}],16:[function(t,e,o){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0});var s,l,u=t("../common"),n=t("../../DTOs/BlogPost"),a=t("../../Services/BlogController"),c="Are your sure you want to reset the current form ?",f="Are your sure you want to delete the current post ?";o.init=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){return u.utils.log("edit.init() START",{p:e}),s=e.isAdding,l=e.$blockingDiv,o.post=new n.BlogPostKO(e.post),u.utils.log("edit.init(): add custom Knockout bindings handler"),ko.bindingHandlers.tinymceEditor={init:function(t,e,n,r,o){var i=$(t),s=e();i.html(s()),i.tinymce({inline:!0,plugins:"image,code",setup:function(t){t.on("change",function(){s(i.html())})}})},update:function(t,e){var n=e(),r=$(t);r.html(n())}},u.utils.log("edit.init(): Init picture upload"),e.$picUploadControl.on("change",function(){!function(n){r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return u.utils.log("edit.uploadPicture(): START",{files:n}),0==n.length?[2]:void 0===window.FormData?(u.utils.error("This browser doesn't support HTML5 file uploads!"),[2]):[4,a.uploadPicture(n[0])];case 1:return(e=t.sent()).success?(o.post.imageHtml(e.imageTagContent),u.utils.log("edit.uploadPicture(): END")):(u.utils.error("edit.uploadPicture(): Error",{rc:e}),u.html.showMessage(e.errorMessage)),[2]}})})}(e.$picUploadControl[0].files)}),u.utils.log("edit.init(): Init date picker"),e.$txtDate.datepicker({dateFormat:"yy-mm-dd"}),u.utils.log("edit.init() END"),[2]})})},o.refresh=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return u.utils.log("edit.refresh(): START"),u.utils.log("edit.refresh(): Wait for user confirmation"),[4,u.html.confirm(c)];case 1:return t.sent()?(u.utils.log("edit.refresh(): Retreive item"),u.html.block(l),[4,a.list({id:o.post.id(),includeImages:!0,includeInactives:!0})]):(u.utils.log("edit.refresh(): NOT confirmed ; END"),[2]);case 2:return e=t.sent(),u.html.unblock(l),e.success?(u.utils.log("edit.refresh(): Update blog post"),o.post.fromDTO(e.posts[0]),u.utils.log("edit.refresh(): END")):(u.utils.error("retreive post error",{rc:e}),u.html.showMessage(e.errorMessage)),[2]}})})},o.save=function(){return r(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:return u.utils.log("edit.save(): START"),u.utils.log("edit.save(): Create DTO"),e=o.post.toDTO(),u.utils.log("edit.save(): Send the save request"),u.html.block(l),[4,a.save(e)];case 1:return n=t.sent(),u.html.unblock(l),n.success?(s&&(u.utils.log("edit.save(): Adding => Redirect to edit page"),r=u.routes.blog.edit.replace(u.routes.itemIDParameter,""+n.id),u.url.redirect(r)),u.utils.log("edit.save(): END")):(u.utils.error("edit.save(): Error",{rc:n}),u.html.showMessage(n.errorMessage)),[2]}})})},o.delete_=function(){return r(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:return u.utils.log("edit.delete(): START"),u.utils.log("edit.delete(): Wait for user confirmation"),[4,u.html.confirm(f)];case 1:return t.sent()?(u.utils.log("edit.delete(): Send the delete request"),u.html.block(l),[4,a.delete_(o.post.id())]):(u.utils.log("edit.delete(): NOT confirmed ; END"),[2]);case 2:return e=t.sent(),u.html.unblock(l),e.success?(u.utils.error("edit.delete(): Redirect to list page"),n=u.routes.blog.list.replace(u.routes.languageParameter,u.pageParameters.currentLanguage),u.url.redirect(n),u.utils.log("edit.delete(): END")):(u.utils.error("edit.delete(): Error",{rc:e}),u.html.showMessage(e.errorMessage)),[2]}})})}},{"../../DTOs/BlogPost":3,"../../Services/BlogController":7,"../common":23}],17:[function(t,e,n){var i=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},s=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var l=t("../common"),u=t("../../Services/BlogController"),o=t("./BlogController"),a="ttt-blog-id";function c(){return i(this,void 0,void 0,function(){var o,e,r=this;return s(this,function(t){return l.utils.log("loadImages(): START"),o=[],$("["+a+"]").each(function(t,e){var n=$(e),r=parseInt(n.attr(a));n.removeAttr(a),o.push({id:r,$container:n,model:null})}),l.utils.log("loadImages(): Asynchroneously retreive posts (full) DTOs",{posts:o}),o.forEach(function(n){return i(r,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return l.html.block(n.$container),[4,u.list({id:n.id})];case 1:return e=t.sent(),l.html.unblock(n.$container),e.success?(n.model=e.posts[0],l.utils.log("loadImages(): Bind model",{$element:n.$container,id:n.id}),ko.applyBindings(n.model,n.$container[0]),[2]):(l.utils.error("retreive post error",{rc:e}),[2])}})})}),e=0<o.length?o[o.length-1]:null,l.utils.log("loadImages(): END",{lastPostItem:e}),[2,e]})})}n.init=function(n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return l.utils.log("list.init() START",{p:n}),[4,c()];case 1:return e=t.sent(),l.utils.log("list.init(): Wait for document.load"),[4,new Promise(function(t){return $(window).on("load",function(){return t()})})];case 2:return t.sent(),l.utils.log("list.init(): Loaded!"),function(r){i(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:l.utils.log("loopLoadNextPosts(): START",{p:r}),e=r.lastPost,t.label=1;case 1:return null==e?[3,5]:(l.utils.log("loopLoadNextPosts(): Wait for $endPostElement to be visible"),[4,l.html.waitForScrolledVisible(r.$endPostElement)]);case 2:return t.sent(),l.utils.log("loopLoadNextPosts(): Request next '"+r.postsIncrement+"' posts"),r.$spinner.show(),[4,o.list.list({noLayout:!0,includeImages:!1,skipToID:e.id,take:r.postsIncrement})];case 3:return n=t.sent(),r.$spinner.hide(),l.utils.log("loopLoadNextPosts(): Append received posts"),r.$endPostElement.before(n),l.utils.log("loopLoadNextPosts(): Launch 'loadImages()'",{lastPost:e}),[4,c()];case 4:return e=t.sent(),l.utils.log("loopLoadNextPosts()",{lastPost:e}),[3,1];case 5:return l.utils.log("loopLoadNextPosts(): END"),[2]}})})}({$endPostElement:n.$endPostElement,$spinner:n.$spinner,lastPost:e,postsIncrement:n.postsIncrement}),l.utils.log("list.init() END"),[2]}})})}},{"../../Services/BlogController":7,"../common":23,"./BlogController":15}],18:[function(t,e,o){var n=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0});var s,l=t("../common"),r=t("../../DTOs/Item"),u=t("../../Services/ItemController");function a(){return n(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:return l.utils.log("add.save(): START"),e=o.item.toDictObj(),l.utils.log("add.save(): Launch save"),l.html.block(s),[4,u.save({item:e})];case 1:return n=t.sent(),l.html.unblock(s),n.success?(l.utils.log("add.save(): Redirect",{rc:n}),r=l.routes.itemTTT.edit.replace(l.routes.itemCodeParameter,n.newCode),l.utils.log('add.save(): url="'+r+'"'),l.url.redirect(r),l.utils.log("add.save(): END"),[2]):(l.utils.error("add.save(): Error",{rc:n}),l.html.showMessage(n.errorMessage),[2])}})})}o.init=function(e){return n(this,void 0,void 0,function(){return i(this,function(t){return l.utils.log("add.init() START",{p:e}),s=e.$blockingDiv,l.utils.log("add.init(): Create KO item"),o.item=new r.ItemKO(e.$fieldsContainer),l.utils.log("add.init(): Apply KO item"),ko.applyBindings(o.item,e.$fieldsContainer[0]),l.utils.log("add.init(): Bind JQuery events"),e.$btnSave.click(a),l.utils.log("add.init() END"),[2]})})}},{"../../DTOs/Item":4,"../../Services/ItemController":8,"../common":23}],19:[function(t,e,o){var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},s=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(o,"__esModule",{value:!0});var l,u,a=t("../common"),c=t("../../DTOs/Item"),f=t("../../Services/ItemController"),d=t("../../Services/ItemPictureController"),h=t("../../Services/TranslationController"),p=t("../../DTOs/Translation"),m="Are you sure you want to delete that item?",v="Item saved successfully",b="An error occured while refresing the data: ",g="Are you sure you want to delete that image?";function w(){return i(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.save(): START"),e=o.item.toDictObj(),a.utils.log("edit.save(): Launch save"),a.html.block(l),[4,f.save({originalCode:u,item:e})];case 1:return n=t.sent(),a.html.unblock(l),n.success?(a.utils.log("edit.save(): Refresh values",{rc:n}),[4,k(n.newCode)]):(a.utils.error("edit.save(): Error",{rc:n}),a.html.showMessage(n.errorMessage),[2]);case 2:return t.sent()&&a.html.showMessage(v),a.utils.log("edit.save(): END"),[2]}})})}function y(r){return i(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.uploadPicture(): START",{files:r}),0==r.length?[2]:void 0===window.FormData?(a.utils.error("This browser doesn't support HTML5 file uploads!"),[2]):(a.utils.log("edit.uploadPicture(): Create '"+r.length+"' upload tasks"),a.html.block(l),e=$.map(r,function(t){return d.upload(u,t)}),a.utils.log("edit.uploadPicture(): Wait for tasks to terminate"),[4,Promise.all(e)]);case 1:return n=t.sent(),a.html.unblock(l),a.utils.log("edit.uploadPicture(): All tasks terminated"),$.each(n,function(t,e){e||(a.utils.error("edit.delete(): Upload error",{i:t,rc:e}),a.html.showMessage(e.errorMessage))}),[4,k()];case 2:return t.sent(),a.utils.log("edit.uploadPicture(): END"),[2]}})})}function k(r){return i(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.refresh(): START"),(e=null)==r?r=u:(u!=r&&(e=a.routes.itemTTT.edit.replace(a.routes.itemCodeParameter,r)),u=r),a.utils.log("edit.refresh(): Launch request"),a.html.block(l),[4,f.details(r)];case 1:return n=t.sent(),a.html.unblock(l),n.success?(a.utils.log("edit.refresh(): Load from new item",{rc:n}),o.item.fromDictObj(n.item),null!=e&&(a.utils.log('edit.refresh(): Update URL to "'+e+'"'),a.url.pushHistory({pathname:e,newTitle:o.item.name()})),a.utils.log("edit.refresh(): END"),[2,!0]):(a.utils.error("edit.refresh(): Error",{rc:n}),a.html.showMessage(b+n.errorMessage),[2,!1])}})})}o.init=function(r){return i(this,void 0,void 0,function(){return s(this,function(t){var e,n;return a.utils.log("edit.init() START",{p:r}),l=r.$blockingDiv,a.utils.log("edit.init(): Create KO item"),o.item=new T(r.$fieldsContainer,r.model),u=o.item.code(),a.utils.log("edit.init(): Bind JQuery events"),r.$btnSave.click(w),r.$btnDelete.click(function(){!function(r){i(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.delete(): START"),1==r?[3,2]:(a.utils.log("edit.delete(): Ask confirmation"),[4,a.html.confirm(m)]);case 1:if(!t.sent())return a.utils.log("edit.delete(): NOT CONFIRMED"),[2];t.label=2;case 2:return a.utils.log("edit.delete(): Launch delete"),a.html.block(l),[4,f.delete_(u)];case 3:return e=t.sent(),a.html.unblock(l),e.success?(a.utils.log("edit.delete(): Redirect"),n=a.routes.itemTTT.list.replace(a.routes.languageParameter,a.pageParameters.currentLanguage),a.utils.log("edit.delete()",{url:n}),a.url.redirect(n),a.utils.log("edit.delete(): END")):(a.utils.error("edit.delete(): Error",{rc:e}),a.html.showMessage(e.errorMessage)),[2]}})})}()}),a.utils.log("edit.init(): Init picture upload"),e=r.$picUploadDropZone,n=r.$picUploadControl,a.utils.log("edit.initDropZone(): Create drop zone object"),o.picDropZone={hover:ko.observable(!1)},a.utils.log('edit.initDropZone(): Watch for drag-drops on "upload image drop zone"'),e.on("dragenter",function(t){o.picDropZone.hover(!0),t.stopPropagation(),t.preventDefault()}),e.on("dragover",function(t){o.picDropZone.hover(!0),t.stopPropagation(),t.preventDefault()}),e.on("dragleave",function(t){o.picDropZone.hover(!1)}),e.on("drop",function(t){o.picDropZone.hover(!1),t.preventDefault();var e=t.originalEvent.dataTransfer.files;y(e)}),n.on("change",function(){var t=n[0].files;y(t)}),a.utils.log("edit.init() END"),[2]})})},o.autoCompleteFeature=function(n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,h.autoCompleteResolve({type:h.TranslationTypes.feature,searchString:n,includeTranslations:!0})];case 1:return(e=t.sent()).success?[2,e.list]:(a.utils.error("autocomplete error",{rc:e}),[2,[]])}})})},o.deletePicture=function(n,r){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.deletePicture(): START"),1==r?[3,2]:(a.utils.log("edit.deletePicture(): Ask confirmation"),[4,a.html.confirm(g)]);case 1:if(!t.sent())return a.utils.log("edit.deletePicture(): NOT CONFIRMED"),[2];t.label=2;case 2:return a.utils.log("edit.deletePicture(): Launch delete request"),a.html.block(l),[4,d.delete_({itemCode:n.itemCode,number:n.number})];case 3:return e=t.sent(),a.html.unblock(l),e.success||(a.utils.error("edit.deletePicture(): Error",{rc:e}),a.html.showMessage(e.errorMessage)),a.utils.log("edit.deletePicture(): Launch refresh"),[4,k()];case 4:return t.sent(),a.utils.log("edit.deletePicture(): END"),[2]}})})},o.toggleMainPicture=function(n){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.toggleMainPicture(): START"),a.utils.log("edit.toggleMainPicture(): Launch toggle request"),a.html.block(l),[4,d.setMain({itemCode:n.itemCode,number:n.number,isMain:!n.isMainImage})];case 1:return e=t.sent(),a.html.unblock(l),e.success||(a.utils.error("edit.toggleMainPicture(): Error",{rc:e}),a.html.showMessage(e.errorMessage)),a.utils.log("edit.toggleMainPicture(): Launch refresh"),[4,k()];case 2:return t.sent(),a.utils.log("edit.toggleMainPicture(): END"),[2]}})})},o.reorderPicture=function(r,o){return i(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return a.utils.log("edit.movePicture(): START"),(e=r.number+o)<=0&&(e=1),r.number==e?[2]:(a.utils.log("edit.movePicture(): Launch move request"),a.html.block(l),[4,d.reorder({itemCode:r.itemCode,number:r.number,newNumber:e})]);case 1:return n=t.sent(),a.html.unblock(l),n.success||(a.utils.error("edit.movePicture(): Error",{rc:n}),a.html.showMessage(n.errorMessage)),a.utils.log("edit.movePicture(): Launch refresh"),[4,k()];case 2:return t.sent(),a.utils.log("edit.movePicture(): END"),[2]}})})},o.scrambleUrl=function(t){return 0<=t.indexOf("?")?t+="&":t+="?",t=t+"p="+a.utils.newGuid()};var T=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.features=ko.observableArray(e.features.map(function(t){return new p.TranslationKO(t)})),n.pictures=ko.observableArray(e.pictures),n}return n(t,r),t.prototype.addNewFeature=function(){this.features.push(new p.TranslationKO)},t.prototype.toDictObj=function(t){var e=r.prototype.toDictObj.call(this,t);return e.features=this.features().map(function(t){return{en:t.en(),fr:"",nl:""}}),e},t.prototype.fromDictObj=function(t){r.prototype.fromDictObj.call(this,t),this.features(t.features.map(function(t){return new p.TranslationKO(t)})),this.pictures(t.pictures)},t}(c.ItemKO)},{"../../DTOs/Item":4,"../../DTOs/Translation":5,"../../Services/ItemController":8,"../../Services/ItemPictureController":9,"../../Services/TranslationController":12,"../common":23}],20:[function(t,e,n){var r=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},o=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var i,s,l,u=t("../common");i=n.list||(n.list={}),s=u.utils.strEnum(["grid","list"]),i.ViewModes=s.e,i.allViewModes=s.a,l=u.utils.strEnum(["price","price_desc","name","name_desc"]),i.SortingFields=l.e,i.allSortingFields=l.a,i.getListContent=function(n){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e=u.routes.itemTTT.list.replace(u.routes.languageParameter,u.pageParameters.currentLanguage),[4,u.url.getRequest(e,n)];case 1:return[2,t.sent()]}})})}},{"../common":23}],21:[function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},l=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var i,u,a,c,f,d=t("../common"),h=t("../../Services/ItemController"),p=t("./ItemTTTController"),m=t("../../DTOs/Item"),v=t("../../Language"),b="[type=ttt-model]";function g(){d.utils.log("list.reconstructItemsList(): START");var t=c.find(b);d.utils.log("list.reconstructItemsList(): Reconstructing "+t.length+" models");var s=[];t.each(function(t,e){var n=$(e),r=n.parent(),o=JSON.parse(n.text());n.remove();var i=new k(r,o);s.push(i)}),d.utils.log("list.reconstructItemsList(): Replacing itemsList"),n.itemsList=s,d.utils.log("list.reconstructItemsList(): END")}function w(){n.itemsList.forEach(function(t){t.visible(t.getIsVisible())})}function y(n){return s(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:if(d.utils.log("list.refreshList(): START",{p:n,currentSortingField:i}),n.noLayout=!0,null!=n.sortingField){if(n.sortingField==i)switch(i){case p.list.SortingFields.name:n.sortingField=p.list.SortingFields.name_desc;break;case p.list.SortingFields.price:n.sortingField=p.list.SortingFields.price_desc}i=n.sortingField}return d.utils.log("list.refreshList(): Request html & replace list DOM"),d.html.block(f),[4,p.list.getListContent(n)];case 1:return e=t.sent(),d.html.unblock(f),c.html(e),g(),d.utils.log("list.refreshList(): END",{currentSortingField:i}),[2]}})})}n.init=function(e){return s(this,void 0,void 0,function(){return l(this,function(t){return d.utils.log("list.init(): START"),i=e.sortingField,u=e.$txtSearch,a=e.$cbShowInactive.prop("checked",!0),c=e.$divCarsList,f=c,e.$btnViewGrid.click(function(){y({viewMode:p.list.ViewModes.grid})}),e.$btnViewList.click(function(){y({viewMode:p.list.ViewModes.list})}),e.$btnSortName.click(function(){y({sortingField:p.list.SortingFields.name})}),e.$btnSortPrice.click(function(){y({sortingField:p.list.SortingFields.price})}),g(),d.utils.log("list.init(): Bind JQuery events"),u.keyup(function(){w()}),a.change(function(){w()}),d.utils.log("list.init(): END"),[2]})})},n.filterItemsList=w;var k=function(i){function t(t,e){var n=this,r=[d.utils.nameof("code"),d.utils.nameof("name"),d.utils.nameof("descriptionEN"),d.utils.nameof("descriptionFR"),d.utils.nameof("descriptionNL"),d.utils.nameof("active")],o=n=i.call(this,t,e,r)||this;return n.$container=t,n.visible=ko.observable(o.getIsVisible()),ko.applyBindings(o,t[0]),n}return o(t,i),t.prototype.toggleActive=function(){return s(this,void 0,void 0,function(){var e,n,r;return l(this,function(t){switch(t.label){case 0:return d.utils.log("list.ItemKO.toggleActive(): START"),e=this,d.utils.log("list.ItemKO.toggleActive(): Retreive original model"),d.html.block(f),[4,h.details(e.code())];case 1:return(r=t.sent()).success?(n=r.item,d.utils.log("list.ItemKO.toggleActive(): Toggle active flag & save"),n.active=!n.active,[4,h.save({originalCode:n.code,item:n})]):(d.html.unblock(f),d.utils.error("Item retreive error",{rc:r}),[2]);case 2:return(r=t.sent()).success||d.utils.error("Item save error",{rc:r}),d.utils.log("list.ItemKO.toggleActive(): Refresh"),[4,y({})];case 3:return t.sent(),d.html.unblock(f),d.utils.log("list.ItemKO.toggleActive(): END"),[2]}})})},t.prototype.getIsVisible=function(){var t=this,e=a.is(":checked");if(!t.active()&&!e)return!1;var n=u.val();if(""==(n=(null==n?"":n).toLowerCase().trim()))return!0;var r=[];$.each(n.split(" "),function(t,e){d.utils.stringIsNullOrWhitespace(e)||r.push(e.trim())});var o=[];switch(o.push(t.name()),d.pageParameters.currentLanguage){case v.Languages.en:o.push(t.descriptionEN());break;case v.Languages.fr:o.push(t.descriptionFR());break;case v.Languages.nl:o.push(t.descriptionNL())}var i=0;return r.forEach(function(t,e){for(var n=0;n<o.length;++n){if(0<=o[n].toLowerCase().indexOf(t))return void++i}}),i==r.length},t}(m.ItemKO)},{"../../DTOs/Item":4,"../../Language":6,"../../Services/ItemController":8,"../common":23,"./ItemTTTController":20}],22:[function(t,e,n){var o=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},i=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var s,l=t("../common"),u=t("../../Services/TestimonialController");n.init=function(e){l.utils.log("list.init(): START"),s=e.saveSuccessMessage,l.utils.log("list.init(): Create KO for new testimonial form"),n.formTestimonial=new r(e.$formDialog,e.urlImgNotFound),l.utils.log("list.init(): Init picture upload"),e.$picUploadControl.on("change",function(){var t=e.$picUploadControl[0].files;n.formTestimonial.uploadPicture(t)}),l.utils.log("list.init(): END")};var r=function(){function t(t,e){var n=this;this.$container=t,this.$blockingDiv=t,this.showRequiredText=ko.observable(!1),this.model=null,this.firstLastName=ko.observable(""),this.whosWho=ko.observable(""),this.text=ko.observable(""),this.imageData=ko.observable(null),this.imageSrc=ko.computed(function(){var t=n.imageData();return null==t?e:t}),l.utils.log("FormTestimonial(): Bind to the Boostrap's close event"),n.$container.on("hidden.bs.modal",function(){return n.reset()}),l.utils.log("FormTestimonial(): KO bind the form dialog"),ko.applyBindings(n,n.$container[0])}return t.prototype.uploadPicture=function(r){return o(this,void 0,void 0,function(){var e,n;return i(this,function(t){switch(t.label){case 0:return l.utils.log("FormTestimonial.uploadPicture(): START",{files:r}),e=this,0==r.length?[2]:void 0===window.FormData?(l.utils.error("This browser doesn't support HTML5 file uploads!"),[2]):(l.html.block(e.$blockingDiv),[4,u.uploadPicture(r[0])]);case 1:return n=t.sent(),l.html.unblock(e.$blockingDiv),n.success?(e.imageData(n.imageData),l.utils.log("FormTestimonial.uploadPicture(): END"),[2]):(l.utils.error("FormTestimonial.uploadPicture(): Error",{rc:n}),l.html.showMessage(n.errorMessage),[2])}})})},t.prototype.reset=function(){l.utils.log("FormTestimonial.reset(): START");var t=this;t.showRequiredText(!1),t.model=null,t.firstLastName(""),t.whosWho(""),t.text(""),t.imageData(null),l.utils.log("FormTestimonial.reset(): END")},t.prototype.close=function(){l.utils.log("FormTestimonial.close(): START"),this.$container.modal("hide"),l.utils.log("FormTestimonial.close(): END")},t.prototype.save=function(){return o(this,void 0,void 0,function(){var e,n,r;return i(this,function(t){switch(t.label){case 0:return l.utils.log("FormTestimonial.save(): START"),e=this,l.utils.stringIsNullOrWhitespace(e.firstLastName())||l.utils.stringIsNullOrWhitespace(e.whosWho())||l.utils.stringIsNullOrWhitespace(e.text())?(e.showRequiredText(!0),[2]):(n={firstLastName:e.firstLastName(),whosWho:e.whosWho(),text:e.text(),imageData:e.imageData()},null==e.model?e.model=$.extend({date:"",active:!1},n):$.extend(e.model,n),l.utils.log("FormTestimonial.save(): Send the save request"),l.html.block(e.$blockingDiv),[4,u.save(e.model)]);case 1:return r=t.sent(),l.html.unblock(e.$blockingDiv),r.success?(e.close(),l.html.showMessage(s),l.utils.log("FormTestimonial.save(): END"),[2]):(l.utils.error("FormTestimonial.save(): Error",{rc:r}),l.html.showMessage(r.errorMessage),[2])}})})},t}()},{"../../Services/TestimonialController":11,"../common":23}],23:[function(t,e,n){var s=this&&this.__awaiter||function(i,s,l,u){return new(l||(l=Promise))(function(t,e){function n(t){try{o(u.next(t))}catch(t){e(t)}}function r(t){try{o(u.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(n,r)}o((u=u.apply(i,s||[])).next())})},l=this&&this.__generator||function(n,r){var o,i,s,t,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,i=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(n,"__esModule",{value:!0});var u,r,o,i=t("./common");n.debugMessages=!1,n.init=function(t){var i=this;n.pageParameters=t.pageParameters,n.routes=n.pageParameters.routes,u.log("common.init()"),u.log("common.init(): Add custom KnockoutHandler"),ko.bindingHandlers.ttt_autocomplete={init:function(t,e){var o=e();$(t).autocomplete({minLength:0,source:function(n,r){return s(i,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return[4,o(n.term)];case 1:return e=t.sent(),r(e),[2]}})})}})}},ko.bindingHandlers.ttt_slideUpDownVisible={init:function(t,e){ko.unwrap(e())||$(t).hide()},update:function(t,e){ko.unwrap(e())?$(t).slideDown():$(t).slideUp()}},ko.bindingHandlers.ttt_slideLeftRightVisible={init:function(t,e){ko.unwrap(e())||$(t).hide()},update:function(t,e){ko.unwrap(e())?$(t).show("blind",{direction:"left"}):$(t).hide("blind",{direction:"left"})}},ko.bindingHandlers.ttt_blink={init:function(t,e){$(t).hide(),e()(!1)},update:function(t,e){var n=$(t),r=e();1==r()&&n.fadeIn().delay(1e3).fadeOut(function(){r(!1)})}}},(r=u=n.utils||(n.utils={})).log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.pageParameters.isDebug&&console.log.apply(console,arguments)},r.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,arguments)},r.nameof=function(t){return t},r.strEnum=function(t){return{e:t.reduce(function(t,e){return t[e]=e,t},Object.create(null)),a:t}},r.stringIsNullOrEmpty=function(t){return null==t||""==t},r.stringIsNullOrWhitespace=function(t){return null==t||""==t.trim()},r.htmlEncode=function(t){return Array.isArray(t)?$.map(t,function(t){return $(document.createElement("span")).text(t).html()}).join("<br/>"):$(document.createElement("span")).text(t).html()},r.arrayContains=function(t,e){return 0<=t.indexOf(e)},r.arrayRemoveItem=function(t,e){var n=t.indexOf(e);return!(n<0||(t.splice(n,1),0))},r.arraySum=function(t,e){var n=0;return t.forEach(function(t){n+=e(t)}),n},r.arrayMoveItem=function(t){var e=1;null!=t.direction&&(e="up"==t.direction?-e:e);var n=t.list.indexOf(t.item);if(n<0)throw{error:"Could not find item in list",item:t.item};var r=n+e;if(r<0?r=0:r>=t.list.length&&(r=t.list.length-1),n==r)return t.list;var o=t.list[n];return t.list[n]=t.list[r],t.list[r]=o,t.list},r.ensureInteger=function(n){null==n.canBeZero&&(n.canBeZero=!0),null==n.canBeNull&&(n.canBeNull=!1),null==n.fallbackValue&&(n.canBeZero?n.fallbackValue=0:n.fallbackValue=1);var r=n.canBeNull;n.observable.subscribe(function(t){if(!r||""!=t&&null!=t){var e=parseInt(t);isNaN(e)?e=n.fallbackValue:n.canBeZero||0!=t?n.mustBePositive&&t<0&&(e=n.fallbackValue):e=n.fallbackValue,t!==e&&n.observable(e)}else n.observable(null)})},r.newGuid=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},r.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},(o=n.html||(n.html={})).showMessage=function(t){var e=$('<div class="modal" tabindex="-1" role="dialog">\n\t\t\t\t\t\t<div class="modal-dialog" role="document">\n\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t\t\t\t\x3c!-- Text content here --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>');e.find(".modal-body").text(t),e.modal()},o.confirm=function(t){var r=$('<div class="modal" tabindex="-1" role="dialog">\n\t\t\t\t\t\t<div class="modal-dialog" role="document">\n\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t<div class="modal-body">\n\t\t\t\t\t\t\t\t\t\x3c!-- Text content here --\x3e\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-primary">Ok</button>\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>');return r.find(".modal-body").text(t),new Promise(function(e){var n=!1;r.find(".btn-primary").click(function(){n=!0,r.modal("hide"),e(!0)}),r.on("hidden.bs.modal",function(t){n||e(!1)}),r.modal()})},o.block=function(t){var e=1+(0|t.data("ttt_blockCounter"));return t.data("ttt_blockCounter",e),1==e&&t.block(),t},o.unblock=function(t){var e=(0|t.data("ttt_blockCounter"))-1;return t.data("ttt_blockCounter",e),e<0&&(i.utils.error("INTERNAL ERROR: Unblock count > block count:",e),e=0,t.data("ttt_blockCounter",0)),0==e&&t.unblock(),t},o.ensureVisible=function(t){var e=t.offset().top-(20+t.height());$("html, body").animate({scrollTop:e}),t.effect("highlight",{},2e3)},o.waitForScrolledVisible=function(r){var o=$(window);function n(){var t=o.scrollTop(),e=t+o.height(),n=r.offset().top;return n+r.height()<=e&&t<=n}return new Promise(function(t){var e;e=function(){n()&&(o.unbind("scroll",e),t())},n()?t():o.bind("scroll",e)})},function(t){var n="onUrlChanged",r=$({}),e=!1;function o(t){var n=[];return $.each(t,function(t,e){t=encodeURIComponent(t),null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||(e=JSON.stringify(e)),e=encodeURIComponent(e),n.push(t+"="+e)}),n.join("&")}function i(t){var e=t.pathname;if(null==e&&(e=window.location.pathname),null!=t.parameters){var n=o(t.parameters);0<n.length&&(e=e+"?"+n)}return e}t.redirect=function(t){window.location.href=t},t.parseParameters=function(t){if(null==t&&(t=window.location.search.substring(1)),0==t.length)return{};for(var e=t.split("&"),n={},r=0;r<e.length;++r){var o=e[r].split("="),i=decodeURIComponent(o[0]),s=decodeURIComponent(o[1]);try{s=JSON.parse(s)}catch(t){}n[i]=s}return n},t.stringifyParameters=o,t.onChanged=function(t){0==e&&($(window).bind("popstate",function(t){r.trigger(n)}),e=!0),r.bind(n,t)},t.createUrl=i,t.pushHistory=function(t){var e=i(t);window.history.pushState({},t.newTitle,e),r.trigger(n)},t.postRequestForm=function(t,e){return u.log("postRequestForm",{url:t,request:e}),new Promise(function(r,o){$.ajax({type:"POST",url:t,contentType:"application/x-www-form-urlencoded",data:e,dataType:"json",success:function(t,e,n){u.log("postRequestForm",{response:t}),r(t)},error:function(t,e,n){u.error("postRequestForm rejected",{jqXHR:t,textStatus:e,errorThrown:n}),o(e)}})})},t.postRequestFormData=function(t,e){return u.log("postRequestFormData",{url:t,formData:e}),new Promise(function(r,o){$.ajax({type:"POST",url:t,contentType:!1,processData:!1,data:e,dataType:"json",success:function(t,e,n){u.log("postRequestFormData",{response:t}),r(t)},error:function(t,e,n){u.error("postRequestFormData rejected",{jqXHR:t,textStatus:e,errorThrown:n}),o(e)}})})},t.postRequestJSON=function(t,e){u.log("postRequestJSON",{url:t,request:e});var n=JSON.stringify(e);return new Promise(function(r,o){$.ajax({type:"POST",url:t,contentType:"application/json",data:n,dataType:"json",success:function(t,e,n){u.log("postRequestJSON",{response:t}),r(t)},error:function(t,e,n){u.error("postRequestJSON rejected",{jqXHR:t,textStatus:e,errorThrown:n}),o(e)}})})},t.getRequest=function(t,e){if(null!=e){var n=o(e);t=t+"?"+n}return u.log("getRequest",{url:t,request:e}),new Promise(function(r,o){$.ajax({type:"GET",url:t,contentType:"text/html",success:function(t,e,n){u.log("getRequest",{response:t}),r(t)},error:function(t,e,n){u.error("getRequest rejected",{jqXHR:t,textStatus:e,errorThrown:n}),o(e)}})})},t.downloadFile=function(t){$(document.body).append($("<iframe/>").attr({src:t,style:"visibility:hidden;display:none"}))}}(n.url||(n.url={})),function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(t("../Language"))},{"../Language":6,"./common":23}]},{},[1,2]);
//# sourceMappingURL=site.min.js.map
