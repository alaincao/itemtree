!function o(l,u,a){function s(t,e){if(!u[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=u[t]={exports:{}};l[t][0].call(i.exports,function(e){return s(l[t][1][e]||e)},i,i.exports,o,l,u,a)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){},{}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r={common:e("./src/Views/common"),itemttt:{list:e("./src/Views/ItemTTT/List"),add:e("./src/Views/ItemTTT/Add"),edit:e("./src/Views/ItemTTT/Edit")}};window.ttt=r},{"./src/Views/ItemTTT/Add":8,"./src/Views/ItemTTT/Edit":9,"./src/Views/ItemTTT/List":11,"./src/Views/common":12}],3:[function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var l=e("../Views/common"),i=function(i){function e(e,t){var n;null==t&&(t={name:""});var r=n=i.call(this,e,t)||this;return null!=r.price&&l.utils.ensureInteger({observable:r.price,canBeZero:!1,canBeNull:!0,mustBePositive:!0}),n}return o(e,i),e.prototype.toDictObj=function(e){return i.prototype.toDictObj.call(this,e)},e}(e("../Utils/BaseAutoItem").BaseAutoItem);n.ItemKO=i},{"../Utils/BaseAutoItem":7,"../Views/common":12}],4:[function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Views/common");n.Languages=(r=i.utils.strEnum(["en","fr","nl"])).e,n.allLanguages=r.a},{"./Views/common":12}],5:[function(e,t,n){var i=this&&this.__awaiter||function(o,l,u,a){return new(u||(u=Promise))(function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}i((a=a.apply(o,l||[])).next())})},o=this&&this.__generator||function(n,r){var i,o,l,e,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(l=0<(l=u.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../Views/common");n.getUrlCode=function(t){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return l.utils.stringIsNullOrWhitespace(t)?[2,null]:[4,l.url.getRequest(l.routes.api.getUrlCode,{originalCode:t})];case 1:return[2,e.sent()]}})})},n.details=function(r){return i(this,void 0,void 0,function(){var t,n;return o(this,function(e){switch(e.label){case 0:return t=l.routes.api.itemDetails.replace(l.routes.itemCodeParameter,r),[4,l.url.postRequest(t,{})];case 1:return(n=e.sent()).item=n.result,delete n.result,[2,n]}})})},n.save=function(n){return i(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return[4,l.url.postRequest(l.routes.api.itemSave,n)];case 1:return(t=e.sent()).newCode=t.result,delete t.result,[2,t]}})})},n.delete_=function(n){return i(this,void 0,void 0,function(){var t;return o(this,function(e){switch(e.label){case 0:return t=l.routes.api.itemDelete.replace(l.routes.itemCodeParameter,n),[4,l.url.postRequest(t,{})];case 1:return[2,e.sent()]}})})}},{"../Views/common":12}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Views/common");n.upload=function(e,t){var n=r.routes.api.itemPictureUpload.replace(r.routes.itemCodeParameter,e),o=new FormData;return o.append("file",t),new Promise(function(r,i){$.ajax({type:"POST",url:n,contentType:!1,processData:!1,data:o,dataType:"json",success:function(e,t,n){e.imageNumber=e.result,delete e.result,r(e)},error:function(e,t,n){i(t)}})})}},{"../Views/common":12}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var l="ttt-name",r=function(){function e(e,t){this.fieldNames=[],this.knockoutify(e,t)}return e.prototype.toDictObj=function(r){var i=this;return null==r&&(r={}),$.each(this.fieldNames,function(e,t){var n=i[t];r[t]=n()}),r},e.prototype.fromDictObj=function(n){var r=this;$.each(this.fieldNames,function(e,t){(0,r[t])(n[t])})},e.prototype.knockoutify=function(e,r){var i=this,o=this;e.find("["+l+"]").each(function(e,t){var n=$(t).attr(l);o[n]=ko.observable(r[n]),i.fieldNames.push(n)})},e}();n.BaseAutoItem=r},{}],8:[function(e,t,i){var n=this&&this.__awaiter||function(o,l,u,a){return new(u||(u=Promise))(function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}i((a=a.apply(o,l||[])).next())})},o=this&&this.__generator||function(n,r){var i,o,l,e,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(l=0<(l=u.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(i,"__esModule",{value:!0});var l,u=e("../common"),r=e("../../DTOs/Item"),a=e("../../Services/ItemController");function s(){return n(this,void 0,void 0,function(){var t,n,r;return o(this,function(e){switch(e.label){case 0:return u.utils.log("add.save(): START"),t=i.item.toDictObj(),u.utils.log("add.save(): Launch save"),u.html.block(l),[4,a.save({item:t})];case 1:return n=e.sent(),u.html.unblock(l),n.success?(u.utils.log("add.save(): Redirect",{rc:n}),r=u.routes.itemTTT.itemEdit.replace(u.routes.itemCodeParameter,n.newCode),u.utils.log('add.save(): url="'+r+'"'),u.url.redirect(r),u.utils.log("add.save(): END"),[2]):(u.utils.error("add.save(): Error",{rc:n}),u.html.showMessage(n.errorMessage),[2])}})})}i.init=function(t){return n(this,void 0,void 0,function(){return o(this,function(e){return u.utils.log("add.init() START",{p:t}),l=t.$blockingDiv,u.utils.log("add.init(): Create KO item"),i.item=new r.ItemKO(t.$fieldsContainer),u.utils.log("add.init(): Apply KO item"),ko.applyBindings(i.item,t.$fieldsContainer[0]),u.utils.log("add.init(): Bind JQuery events"),t.$btnSave.click(s),u.utils.log("add.init() END"),[2]})})}},{"../../DTOs/Item":3,"../../Services/ItemController":5,"../common":12}],9:[function(e,t,i){var o=this&&this.__awaiter||function(o,l,u,a){return new(u||(u=Promise))(function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}i((a=a.apply(o,l||[])).next())})},l=this&&this.__generator||function(n,r){var i,o,l,e,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(l=0<(l=u.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(i,"__esModule",{value:!0});var u,a,s=e("../common"),c=e("../../DTOs/Item"),f=e("../../Services/ItemController"),d=e("../../Services/ItemPictureController"),r="Item saved successfully",p="An error occured while refresing the data: ";function h(){return o(this,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return s.utils.log("edit.save(): START"),t=i.item.toDictObj(),s.utils.log("edit.save(): Launch save"),s.html.block(u),[4,f.save({originalCode:a,item:t})];case 1:return n=e.sent(),s.html.unblock(u),n.success?(s.utils.log("edit.save(): Refresh values",{rc:n}),[4,function(r){return o(this,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return s.utils.log("edit.refresh(): START"),(t=null)==r?r=a:(a!=r&&(t=s.routes.itemTTT.itemEdit.replace(s.routes.itemCodeParameter,r)),a=r),s.utils.log("edit.refresh(): Launch request"),s.html.block(u),[4,f.details(r)];case 1:return n=e.sent(),s.html.unblock(u),n.success?(s.utils.log("edit.refresh(): Load from new item",{rc:n}),i.item.fromDictObj(n.item),null!=t&&(s.utils.log('edit.refresh(): Update URL to "'+t+'"'),s.url.pushHistory({pathname:t,newTitle:i.item.name()})),s.utils.log("edit.refresh(): END"),[2,!0]):(s.utils.error("edit.refresh(): Error",{rc:n}),s.html.showMessage(p+n.errorMessage),[2,!1])}})})}(n.newCode)]):(s.utils.error("edit.save(): Error",{rc:n}),s.html.showMessage(n.errorMessage),[2]);case 2:return e.sent()&&s.html.showMessage(r),s.utils.log("edit.save(): END"),[2]}})})}function m(){return o(this,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return s.utils.log("edit.delete(): START"),s.utils.log("edit.delete(): Launch delete"),s.html.block(u),[4,f.delete_(a)];case 1:return t=e.sent(),s.html.unblock(u),t.success?(s.utils.log("edit.delete(): Redirect"),n=s.routes.itemTTT.itemsList.replace(s.routes.languageParameter,s.pageParameters.currentLanguage),s.utils.log("edit.delete()",{url:n}),s.url.redirect(n),s.utils.log("edit.delete(): END"),[2]):(s.utils.error("edit.delete(): Error",{rc:t}),s.html.showMessage(t.errorMessage),[2])}})})}function v(r){return o(this,void 0,void 0,function(){var t,n;return l(this,function(e){switch(e.label){case 0:return s.utils.log("edit.uploadPicture(): START",{files:r}),0==r.length?[2]:void 0===window.FormData?(s.utils.error("This browser doesn't support HTML5 file uploads!"),[2]):(s.utils.log("edit.uploadPicture(): Create '"+r.length+"' upload tasks"),s.html.block(u),t=$.map(r,function(e){return d.upload(a,e)}),s.utils.log("edit.uploadPicture(): Wait for tasks to terminate"),[4,Promise.all(t)]);case 1:return n=e.sent(),s.html.unblock(u),s.utils.log("edit.uploadPicture(): All tasks terminated"),$.each(n,function(e,t){t||(s.utils.error("edit.delete(): Upload error",{i:e,rc:t}),s.html.showMessage(t.errorMessage))}),s.utils.log("edit.uploadPicture(): END"),[2]}})})}i.init=function(r){return o(this,void 0,void 0,function(){return l(this,function(e){var t,n;return s.utils.log("edit.init() START",{p:r}),u=r.$blockingDiv,s.utils.log("edit.init(): Create KO item"),i.item=new c.ItemKO(r.$fieldsContainer,r.model),a=i.item.code(),s.utils.log("edit.init(): Apply KO item bindings"),ko.applyBindings(i.item,r.$fieldsContainer[0]),s.utils.log("edit.init(): Bind JQuery events"),r.$btnSave.click(h),r.$btnDelete.click(m),s.utils.log("edit.init(): Initi picture upload"),t=r.$picUploadDropZone,n=r.$picUploadControl,s.utils.log("edit.initDropZone(): Create drop zone object"),i.picDropZone={hover:ko.observable(!1)},s.utils.log('edit.initDropZone(): Watch for drag-drops on "upload image drop zone"'),t.on("dragenter",function(e){i.picDropZone.hover(!0),e.stopPropagation(),e.preventDefault()}),t.on("dragover",function(e){i.picDropZone.hover(!0),e.stopPropagation(),e.preventDefault()}),t.on("dragleave",function(e){i.picDropZone.hover(!1)}),t.on("drop",function(e){i.picDropZone.hover(!1),e.preventDefault();var t=e.originalEvent.dataTransfer.files;v(t)}),n.on("change",function(){var e=n[0].files;v(e)}),s.utils.log("edit.initDropZone(): Apply KO bindings"),ko.applyBindings(i.picDropZone,t[0]),s.utils.log("edit.init() END"),[2]})})}},{"../../DTOs/Item":3,"../../Services/ItemController":5,"../../Services/ItemPictureController":6,"../common":12}],10:[function(e,t,n){var r=this&&this.__awaiter||function(o,l,u,a){return new(u||(u=Promise))(function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}i((a=a.apply(o,l||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,l,e,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(l=0<(l=u.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o,l,u,a=e("../common");o=n.list||(n.list={}),l=a.utils.strEnum(["grid","list"]),o.ViewModes=l.e,o.allViewModes=l.a,u=a.utils.strEnum(["price","price_desc","name","name_desc"]),o.SortingFields=u.e,o.allSortingFields=u.a,o.getListContent=function(n){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:return t=a.routes.itemTTT.itemsList.replace(a.routes.languageParameter,a.pageParameters.currentLanguage),[4,a.url.getRequest(t,n)];case 1:return[2,e.sent()]}})})}},{"../common":12}],11:[function(e,t,n){var r=this&&this.__awaiter||function(o,l,u,a){return new(u||(u=Promise))(function(e,t){function n(e){try{i(a.next(e))}catch(e){t(e)}}function r(e){try{i(a.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new u(function(e){e(t.value)}).then(n,r)}i((a=a.apply(o,l||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,l,e,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(l=2&t[0]?o.return:t[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,t[1])).done)return l;switch(o=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,o=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(l=0<(l=u.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=r.call(n,u)}catch(e){t=[6,e],o=0}finally{i=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(n,"__esModule",{value:!0});var o,l,u=e("../common"),a=e("./ItemTTTController");function s(n){return r(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:if(u.utils.log("list.refreshList() START",{p:n,currentSortingField:o}),n.noLayout=!0,null!=n.sortingField){if(n.sortingField==o)switch(o){case a.list.SortingFields.name:n.sortingField=a.list.SortingFields.name_desc;break;case a.list.SortingFields.price:n.sortingField=a.list.SortingFields.price_desc}o=n.sortingField}return[4,a.list.getListContent(n)];case 1:return t=e.sent(),l.html(t),u.utils.log("list.refresh() END",{currentSortingField:o}),[2]}})})}n.init=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){return u.utils.log("list.init() START"),o=t.sortingField,l=t.$divCarsList,t.$btnViewGrid.click(function(){s({viewMode:a.list.ViewModes.grid})}),t.$btnViewList.click(function(){s({viewMode:a.list.ViewModes.list})}),t.$btnSortName.click(function(){s({sortingField:a.list.SortingFields.name})}),t.$btnSortPrice.click(function(){s({sortingField:a.list.SortingFields.price})}),u.utils.log("list.init() END"),[2]})})}},{"../common":12,"./ItemTTTController":10}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r,i,o,l=e("./common");n.debugMessages=!1,n.init=function(e){n.pageParameters=e.pageParameters,n.routes=n.pageParameters.routes,r.log("common.init()")},(i=r=n.utils||(n.utils={})).log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.pageParameters.isDebug&&console.log.apply(console,arguments)},i.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,arguments)},i.strEnum=function(e){return{e:e.reduce(function(e,t){return e[t]=t,e},Object.create(null)),a:e}},i.stringIsNullOrEmpty=function(e){return null==e||""==e},i.stringIsNullOrWhitespace=function(e){return null==e||""==e.trim()},i.htmlEncode=function(e){return Array.isArray(e)?$.map(e,function(e){return $(document.createElement("span")).text(e).html()}).join("<br/>"):$(document.createElement("span")).text(e).html()},i.arrayContains=function(e,t){return 0<=e.indexOf(t)},i.arrayRemoveItem=function(e,t){var n=e.indexOf(t);return!(n<0||(e.splice(n,1),0))},i.arraySum=function(e,t){var n=0;return e.forEach(function(e){n+=t(e)}),n},i.arrayMoveItem=function(e){var t=1;null!=e.direction&&(t="up"==e.direction?-t:t);var n=e.list.indexOf(e.item);if(n<0)throw{error:"Could not find item in list",item:e.item};var r=n+t;if(r<0?r=0:r>=e.list.length&&(r=e.list.length-1),n==r)return e.list;var i=e.list[n];return e.list[n]=e.list[r],e.list[r]=i,e.list},i.ensureInteger=function(n){null==n.canBeZero&&(n.canBeZero=!0),null==n.canBeNull&&(n.canBeNull=!1),null==n.fallbackValue&&(n.canBeZero?n.fallbackValue=0:n.fallbackValue=1);var r=n.canBeNull;n.observable.subscribe(function(e){if(!r||""!=e&&null!=e){var t=parseInt(e);isNaN(t)?t=n.fallbackValue:n.canBeZero||0!=e?n.mustBePositive&&e<0&&(t=n.fallbackValue):t=n.fallbackValue,e!==t&&n.observable(t)}else n.observable(null)})},i.newGuid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},i.sleep=function(t){return new Promise(function(e){return setTimeout(e,t)})},(o=n.html||(n.html={})).showMessage=function(e){var t=$("<div/>").text(e);$("body").append(t),t.dialog()},o.block=function(e){var t=1+(0|e.data("common_blockCounter"));return e.data("common_blockCounter",t),1==t&&e.block(),e},o.unblock=function(e){var t=(0|e.data("common_blockCounter"))-1;return e.data("common_blockCounter",t),t<0&&(l.utils.error("INTERNAL ERROR: Unblock count > block count:",t),t=0,e.data("common_blockCounter",0)),0==t&&e.unblock(),e},o.ensureVisible=function(e){var t=e.offset().top-(20+e.height());$("html, body").animate({scrollTop:t}),e.effect("highlight",{},2e3)},function(e){var n="onUrlChanged",r=$({}),t=!1;function i(e){var n=[];return $.each(e,function(e,t){e=encodeURIComponent(e),null==t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t||(t=JSON.stringify(t)),t=encodeURIComponent(t),n.push(e+"="+t)}),n.join("&")}function o(e){var t=e.pathname;if(null==t&&(t=window.location.pathname),null!=e.parameters){var n=i(e.parameters);0<n.length&&(t=t+"?"+n)}return t}e.redirect=function(e){window.location.href=e},e.parseParameters=function(e){if(null==e&&(e=window.location.search.substring(1)),0==e.length)return{};for(var t=e.split("&"),n={},r=0;r<t.length;++r){var i=t[r].split("="),o=decodeURIComponent(i[0]),l=decodeURIComponent(i[1]);try{l=JSON.parse(l)}catch(e){}n[o]=l}return n},e.stringifyParameters=i,e.onChanged=function(e){0==t&&($(window).bind("popstate",function(e){r.trigger(n)}),t=!0),r.bind(n,e)},e.createUrl=o,e.pushHistory=function(e){var t=o(e);window.history.pushState({},e.newTitle,t),r.trigger(n)},e.postRequest=function(e,t){var n=JSON.stringify(t);return new Promise(function(r,i){$.ajax({type:"POST",url:e,contentType:"application/json",data:n,dataType:"json",success:function(e,t,n){return r(e)},error:function(e,t,n){i(t)}})})},e.getRequest=function(e,t){if(null!=t){var n=i(t);e=e+"?"+n}return new Promise(function(r,i){$.ajax({type:"GET",url:e,contentType:"text/html",success:function(e,t,n){return r(e)},error:function(e,t,n){i(t)}})})},e.downloadFile=function(e){$(document.body).append($("<iframe/>").attr({src:e,style:"visibility:hidden;display:none"}))}}(n.url||(n.url={})),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(e("../Language"))},{"../Language":4,"./common":12}]},{},[1,2]);
//# sourceMappingURL=site.min.js.map
